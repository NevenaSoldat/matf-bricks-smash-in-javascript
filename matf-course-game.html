<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Matf JavaScript Course</title>
    <style>
    	* { padding: 0; margin: 0; }
    	canvas { background: #eee; display: block; margin: 0 auto; }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="1080" height="720"></canvas>

<script>
	var gameCanvas = document.getElementById("gameCanvas");
    var gameContext = gameCanvas.getContext("2d");
	
	var x = gameCanvas.width/2;
    var y = gameCanvas.height;
	
	var paddlePosition = gameCanvas.width/2;
	var paddleWidth = 75;
	var ballSize = 10;
	
	var rightArrowPressed = false;
    var leftArrowPressed = false;
	
	document.addEventListener("keydown", keyDownHandler, false);
    document.addEventListener("keyup", keyUpHandler, false);
		
	function keyDownHandler(e) {
        if(e.keyCode == 39) {
            rightArrowPressed = true;
        }
        else if(e.keyCode == 37) {
            leftArrowPressed = true;
        }
		else
		{
			rightArrowPressed = false;
			leftArrowPressed = false;
		}		
    }
	
    function keyUpHandler(e) {
        if(e.keyCode == 39) {
            rightArrowPressed = false;
        }
        else if(e.keyCode == 37) {
            leftArrowPressed = false;
        }
    }
	
	function drawPaddle()
	{
		gameContext.beginPath();
        gameContext.rect(paddlePosition, gameCanvas.height-10, paddleWidth, 10);
        gameContext.fillStyle = "black";
        gameContext.fill();
        gameContext.closePath();
	}
	
	function drawBall() {
        gameContext.beginPath();
        gameContext.arc(x, y, ballSize, 0, Math.PI*2);
        gameContext.fillStyle = "green";
        gameContext.fill();
        gameContext.closePath();
    }
	
	var xBallStep = -5;
	var yBallStep = -5;
	var xPaddleStep = 4;
	var yPaddleStep = 4;
	function draw() {	
	    gameContext.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
        
		drawPaddle();
		drawBall();
		
		if(rightArrowPressed && paddlePosition < gameCanvas.width-paddleWidth) {
            paddlePosition += xPaddleStep;
        }
        else if(leftArrowPressed && paddlePosition > 0) {
            paddlePosition -= yPaddleStep;
        }
		
		if(x + xBallStep > gameCanvas.width-ballSize || x + xBallStep < ballSize) {
            xBallStep = -xBallStep;
        }
        if(y + yBallStep < ballSize) {
            yBallStep = -yBallStep;
        }
		else if(y + yBallStep > gameCanvas.height-ballSize) {
			if(x > paddlePosition && x < paddlePosition + paddleWidth) {
                yBallStep = -yBallStep;
            }		
		}
						
        x += xBallStep;
        y += yBallStep;
		
		window.requestAnimationFrame(draw);
    }
    
    draw();
</script>

</body>
</html>
